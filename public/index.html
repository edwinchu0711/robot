<!-- 在您的網頁中添加這段代碼 -->
<div id="chatbot-container" style="position: fixed; bottom: 20px; right: 20px; width: 300px; border: 1px solid #ccc; border-radius: 10px; overflow: hidden;">
    <div id="chatbot-header" style="background: #4CAF50; color: white; padding: 10px; cursor: pointer;">
        <span>聊天機器人</span>
        <span id="chatbot-toggle" style="float: right;">-</span>
    </div>
    <div id="chatbot-body" style="height: 300px; display: flex; flex-direction: column;">
        <div id="chatbot-messages" style="flex: 1; overflow-y: auto; padding: 10px; background: #f9f9f9;"></div>
        <div style="display: flex; padding: 10px; background: white;">
            <input type="text" id="chatbot-input" placeholder="輸入訊息..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button id="chatbot-send" style="margin-left: 5px; padding: 8px 15px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">發送</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotBody = document.getElementById('chatbot-body');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotSend = document.getElementById('chatbot-send');
        
        // 切換聊天窗口
        chatbotToggle.addEventListener('click', function() {
            if (chatbotBody.style.display === 'none') {
                chatbotBody.style.display = 'flex';
                chatbotToggle.textContent = '-';
            } else {
                chatbotBody.style.display = 'none';
                chatbotToggle.textContent = '+';
            }
        });
        
        // 添加消息到聊天窗口
        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.style.margin = '5px 0';
            messageDiv.style.padding = '8px 12px';
            messageDiv.style.borderRadius = '18px';
            messageDiv.style.maxWidth = '80%';
            messageDiv.style.alignSelf = isUser ? 'flex-end' : 'flex-start';
            messageDiv.style.background = isUser ? '#4CAF50' : '#e0e0e0';
            messageDiv.style.color = isUser ? 'white' : 'black';
            messageDiv.textContent = message;
            
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }
        
        // 發送消息
        async function sendMessage() {
            const message = chatbotInput.value.trim();
            if (!message) return;
            
            addMessage(message, true);
            chatbotInput.value = '';
            
            try {
                // 替換為您的 API 端點
                const response = await fetch('https://您的應用名稱.onrender.com/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message }),
                });
                
                const data = await response.json();
                addMessage(data.answer, false);
            } catch (error) {
                console.error('Error:', error);
                addMessage('抱歉，發生錯誤', false);
            }
        }
        
        chatbotSend.addEventListener('click', sendMessage);
        chatbotInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
        
        // 初始歡迎消息
        addMessage('你好！我是您的聊天助手，有什麼可以幫助您的嗎？', false);
    });
</script>
